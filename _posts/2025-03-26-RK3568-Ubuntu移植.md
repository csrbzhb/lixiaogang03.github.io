---
layout:     post
title:      RK3568 Ubuntu 移植
subtitle:   firefly
date:       2025-03-26
author:     LXG
header-img: img/post-bg-phone.jpg
catalog: true
tags:
    - linux
---

[RK3568-firefly](https://wiki.t-firefly.com/zh_CN/ROC-RK3568-PC/linux_compile_linux5.10.html)

[基于RK3568的Linux移植步骤](https://blog.csdn.net/weixin_60508885/article/details/130127000)

## Firefly Ubuntu

[Firefly Ubuntu Minimal](https://wiki.t-firefly.com/zh_CN/ROC-RK3568-PC/ubuntu_minimal_support.html)

[Firefly Ubuntu Desktop](https://wiki.t-firefly.com/zh_CN/ROC-RK3568-PC/ubuntu_desktop_support.html)

## 编译命令

```bash

./build.sh firefly_rk3568_roc-rk3568-pc-se_ubuntu_defconfig

./build.sh firefly_rk3568_roc-rk3568-pc-se-mipi_ubuntu_defconfig

./build.sh wif_rk3568_ubuntu_defconfig

./build.sh all

./build.sh cleanall

```

## 源码目录

[rockchip-linux-github](https://github.com/rockchip-linux)

```bash

├── app
├── buildroot
├── build.sh -> device/rockchip/common/scripts/build.sh
├── device
├── docs
├── external
├── firefly-update.sh -> device/rockchip/common/scripts/firefly-update.sh
├── kernel
├── Makefile -> device/rockchip/common/Makefile
├── output     # 编译生成目录
├── prebuilt_rootfs  # ubuntu 镜像
├── prebuilts
├── README.md
├── rkbin
├── rkflash.sh -> device/rockchip/common/scripts/rkflash.sh
├── rockdev -> output/firmware  # 编译生成目录
├── tools
├── u-boot
└── yocto

```

## 编译生成目录

```bash

output$ tree -L 2
.
├── defconfig -> ../device/rockchip/.chips/rk3566_rk3568/firefly_rk3568_roc-rk3568-pc-se-mipi_ubuntu_defconfig
├── final.env -> sessions/2025-03-26_11-10-21/final.env
├── firmware
│   ├── boot.img -> ../../kernel/extboot.img
│   ├── MiniLoaderAll.bin -> ../../u-boot/rk356x_spl_loader_v1.21.114.bin
│   ├── misc.img -> ../../device/rockchip/common/images/wipe_all-misc.img
│   ├── parameter.txt -> ../../device/rockchip/.chips/rk3566_rk3568/parameter-ubuntu-fit.txt
│   ├── recovery.img -> ../recovery/recovery.img
│   ├── rootfs.img -> ../../prebuilt_rootfs/Ubuntu22.04-Xfce_RK3568_KERNEL-5.10_v3.11-27_20240326.img
│   ├── uboot.img -> ../../u-boot/uboot.img
│   └── update.img -> ../update/Image/update.img
├── initial.env -> sessions/2025-03-26_11-10-21/initial.env
├── kconf
│   ├── conf
│   ├── conf.o
│   ├── lxdialog
│   ├── zconf.lex.c
│   └── zconf.tab.o
├── log -> sessions
├── recovery
│   └── recovery.img
├── rootfs
│   └── rootfs.ext4 -> ../../prebuilt_rootfs/Ubuntu22.04-Xfce_RK3568_KERNEL-5.10_v3.11-27_20240326.img
├── security-firmware
├── sessions
│   ├── 2025-03-26_10-58-09
│   ├── 2025-03-26_10-59-42
│   ├── 2025-03-26_11-00-45
│   ├── 2025-03-26_11-09-52
│   ├── 2025-03-26_11-10-21
│   └── latest -> 2025-03-26_11-10-21
└── update
    ├── Image
    ├── package-file -> Image/package-file
    ├── ROC-RK3568-PC-SE-MIPI_Ubuntu22.04-Xfce-r31127_250326.img
    └── update.img -> Image/update.img

```

## 板级配置

Rockchip_RK356X_Quick_Start_Linux_CN.pdf

```txt

device/rockchip/rk3566_rk3568$ tree
.
├── boot4recovery.its
├── boot.its
├── bootramdisk.its
├── firefly_rk3568_roc-rk3568-pc_buildroot_defconfig -> firefly_rk3568_roc-rk3568-pc-se_buildroot_defconfig
├── firefly_rk3568_roc-rk3568-pc-se-2cam_buildroot_defconfig
├── firefly_rk3568_roc-rk3568-pc-se_buildroot_defconfig
├── firefly_rk3568_roc-rk3568-pc-se-edp_buildroot_defconfig
├── firefly_rk3568_roc-rk3568-pc-se-mipi_buildroot_defconfig
├── firefly_rk3568_roc-rk3568-pc-se-mipi_ubuntu_defconfig
├── firefly_rk3568_roc-rk3568-pc-se_ubuntu_defconfig
├── firefly_rk3568_roc-rk3568-pc_ubuntu_defconfig -> firefly_rk3568_roc-rk3568-pc-se_ubuntu_defconfig
├── firefly_rk3568_test-3568jq_ubuntu_defconfig
├── parameter-buildroot-fit-ab.txt
├── parameter-buildroot-fit.txt
├── parameter-buildroot-spi-nor-64M.txt
├── parameter-ubuntu-fit.txt
├── rk356x-ubuntu-package-file
├── rockchip_defconfig -> rockchip_rk3568_evb1_ddr4_v10_defconfig
├── rockchip_rk3566_evb2_lp4x_v10_32bit_defconfig    # 适用于 RK3566 EVB 搭配 LPDDR4 开发板，运行32位根文件系统
├── rockchip_rk3566_evb2_lp4x_v10_defconfig          # 适用于 RK3566 EVB 搭配 LPDDR4 开发板
├── rockchip_rk3568_evb1_ddr4_v10_32bit_defconfig
├── rockchip_rk3568_evb1_ddr4_v10_defconfig
├── rockchip_rk3568_uvc_evb1_ddr4_v10_defconfig
└── zboot.its

```

## 驱动移植

选择 firefly_rk3568_roc-rk3568-pc-se_ubuntu_defconfig 创建 wif_rk3568_ubuntu_defconfig

选择 rockchip_linux_defconfig 创建 wif_linux_defconfig

选择 rk3568-evb8-lp4-v10-linux.dts 创建 rk3568-wif-evb8-lp4-v10-linux.dts

```sh

PREBUILT_ROOTFS_IMG="prebuilt_rootfs/rk356x_ubuntu_rootfs.img"
RK_WIFIBT_TTY="ttyS1"
RK_KERNEL_CFG="wif_linux_defconfig"
RK_KERNEL_VERSION="5.10"
RK_KERNEL_DTS_NAME="rk3568-wif-evb8-lp4-v10-linux"
RK_RAMDISK_IMG="ramdisk.img"
RK_BOOT_FIT_ITS="bootramdisk.its"
RK_RECOVERY_RAMDISK="rk356x-recovery-arm64.cpio.gz"
RK_EXTRA_PARTITION_NUM=0
RK_PARAMETER="parameter-ubuntu-fit.txt"
RK_USE_FIT_IMG=y
USE_EXTBOOT=y

```























