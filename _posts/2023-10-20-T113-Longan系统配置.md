---
layout:     post
title:      T113 Longan 系统配置
subtitle:   Linux
date:       2023-10-20
author:     LXG
header-img: img/post-bg-miui-ux.jpg
catalog: true
tags:
    - linux
---

## 开机流程

![t113_boot_system](/images/allwinner/t113_boot_system.png)

## 进程列表

```txt

sh-4.4# ps -A
PID   USER     COMMAND
    1 root     init
    2 root     [kthreadd]
    3 root     [rcu_gp]
    4 root     [rcu_par_gp]
    6 root     [kworker/0:0H-kb]
    8 root     [mm_percpu_wq]
    9 root     [ksoftirqd/0]
   10 root     [rcu_preempt]
   11 root     [migration/0]
   12 root     [cpuhp/0]
   13 root     [cpuhp/1]
   14 root     [migration/1]
   15 root     [ksoftirqd/1]
   16 root     [kworker/1:0-eve]
   17 root     [kworker/1:0H-kb]
   18 root     [kdevtmpfs]
   21 root     [rcu_tasks_kthre]
   32 root     [kworker/0:1-eve]
  418 root     [oom_reaper]
  419 root     [writeback]
  455 root     [kblockd]
  595 root     [ion_system_heap]
  616 root     [watchdogd]
  712 root     [cfg80211]
  721 root     [kswapd0]
  732 root     [vsync proc 0]
  733 root     [vsync proc 1]
  735 root     [kworker/0:2-eve]
  813 root     [uas]
  884 root     [irq/41-mmc2]
  896 root     [kworker/1:2-eve]
  905 root     [gpio_wq]
  928 root     [ipv6_addrconf]
  936 root     [mmc_complete]
  941 root     [krfcommd]
  958 root     [tve detect]
  980 root     [goodix_wq]
  993 root     [kworker/1:2H]
  994 root     [jbd2/mmcblk0p5-]
  995 root     [ext4-rsv-conver]
 1011 root     /sbin/syslogd -n
 1015 root     /sbin/klogd -n
 1018 root     [jbd2/mmcblk0p8-]
 1019 root     [ext4-rsv-conver]
 1023 root     /sbin/udevd -d
 1045 root     [kworker/0:2H-kb]
 1085 root     [btfwwork]
 1086 root     [bttimerwork]
 1087 root     [kworker/u5:0-hc]
 1089 root     [kworker/u5:2-hc]
 1101 root     dbus-daemon --system
 1122 root     /sbin/dhcpcd -f /etc/dhcpcd.conf
 1124 root     bluetoothd
 1125 root     bluealsa -p a2dp-sink
 1134 root     [RTW_CMD_THREAD]
 1146 root     /usr/sbin/dropbear -R
 1153 root     /usr/sbin/telnetd -F
 1155 root     4G-demon
 1174 root     {rcS} /bin/sh /etc/init.d/rcS
 1175 root     -/bin/sh
 1215 root     DeviceTest
 1222 root     adbd
 1234 root     {adb_conf.sh} /bin/sh /etc/adb_conf.sh start
16487 root     [kworker/u4:1-ev]
16488 root     [kworker/u4:3-ev]
16581 root     /bin/sh -
20073 root     sleep 1
20077 root     pppd /dev/ttyUSB3 115200 user user password passwd connect ''cha
20078 root     ps -A

```

## 开机日志

```txt

[298]BOOT0 commit : 5224261

[301]set pll start
[303]fix vccio detect value:0xc0
[310]periph0 has been enabled
[313]set pll end

[315][pmu]: bus read error
[317]board init ok

[319]enable_jtag
[321]ZQ value = 0x30
[323]get_pmu_exist() = -1

// DDR初始化
[325]DRAM BOOT DRIVE INFO: V0.32
[328]DRAM CLK = 792 MHz
[331]DRAM Type = 3 (2:DDR2,3:DDR3)
[334]DRAMC read ODT  off.
[336]DRAM ODT value: 0x42.
[339]ddr_efuse_type: 0xa
[342]mark_id: 0x60
[344]DRAM SIZE =128 M
[346]PLL_DDR_CTRL_REG:0xf8004100
[349]DRAM_CLK_REG:0xc0000000
[352][TIMING DEBUG] MR2= 0x18
[360]DRAM simple test OK.
[362]rtc standby flag is 0x0, super standby flag is 0x0
[367]dram size =128

// MMC 初始化
[370]card no is 2
[372]sdcard 2 line count 4
[374][mmc]: mmc driver ver 2021-05-21 14:47
[384][mmc]: Wrong media type 0x0, but host sdc2, try mmc first
[389][mmc]: ***Try MMC card 2***
[414][mmc]: RMCA OK!
[416][mmc]: mmc 2 bias 0
[419][mmc]: MMC 5.1
[420][mmc]: HSSDR52/SDR25 4 bit
[423][mmc]: 50000000 Hz
[426][mmc]: 7456 MB
[427][mmc]: ***SD/MMC 2 init OK!!!***


[521]Loading boot-pkg Succeed(index=0).
[524]Entry_name        = u-boot
[531]Entry_name        = optee
[536]Entry_name        = dtb
[538]tunning data addr:0x430003e8
[542]Jump to second Boot.
M/TC: OP-TEE version: e9372c9c-dirty (gcc version 5.3.1 20160412 (Linaro GCC 5.3-2016.05)) #2 Sat Mar 19 11:09:45 UTC 2022 arm
E/TC:0   tee_read_fdt:433 fine node /firmware/optee failed with FDT_ERR_NOTFOUND


// 内核启动
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 5.4.61 (lxg@lxg) (arm-linux-gnueabi-gcc (Linaro GCC 5.3-2016.05) 5.3.1 20160412, GNU ld (Linaro_Binutils-2016.05) 2.25.0 Linaro 2016_02) #2 SMP PREEMPT Thu Oct 19 17:51:11 CST 2023

// CPU
[    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr=10c5387d
[    0.000000] CPU: div instructions available: patching division code
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] OF: fdt: Machine model: rp-t113

// 内存策略
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] cma: Reserved 16 MiB at 0x47000000
[    0.000000] On node 0 totalpages: 32768
[    0.000000]   Normal zone: 256 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 32768 pages, LIFO batch:7

// psci是arm提供的一套电源管理接口
[    0.000000] psci: probing for conduit method from DT.
[    0.000000] psci: PSCIv1.0 detected in firmware.
[    0.000000] psci: Using standard PSCI v0.2 function IDs
[    0.000000] psci: MIGRATE_INFO_TYPE not supported.
[    0.000000] psci: SMC Calling Convention v1.0
[    0.000000] percpu: Embedded 15 pages/cpu s31040 r8192 d22208 u61440
[    0.000000] pcpu-alloc: s31040 r8192 d22208 u61440 alloc=15*4096
[    0.000000] pcpu-alloc: [0] 0 [0] 1
[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 32512

// 内核启动命令
[    0.000000] Kernel command line: earlycon=uart8250,mmio32,0x05000000 clk_ignore_unused initcall_debug=0 console=ttyS0,115200 loglevel=8 root=/dev/mmcblk0p5 init=/init partitions=boot-resource@mmcblk0p1:env@mmcblk0p2:env-redund@mmcblk0p3:boot@mmcblk0p4:rootfs@mmcblk0p5:dsp0@mmcblk0p6:private@mmcblk0p7:UDISK@mmcblk0p8 cma=16M snum= mac_addr= wifi_mac= bt_mac= specialstr= gpt=1 androidboot.hardware=sun8iw20p1 boot_type=2 androidboot.boot_type=2 gpt=1 uboot_message=2018.05(10/19/2023-15:58:25) disp_reserve=4096000,0x448ec000 androidboot.dramsize=128


[    0.000000] printk: log_buf_len individual max cpu contribution: 131072 bytes
[    0.000000] printk: log_buf_len total cpu_extra contributions: 131072 bytes
[    0.000000] printk: log_buf_len min size: 16384 bytes
[    0.000000] printk: log_buf_len: 262144 bytes
[    0.000000] printk: early log buf free: 14208(86%)

[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes, linear)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes, linear)
[    0.000000] mem auto-init: stack:off, heap alloc:off, heap free:off
[    0.000000] Memory: 88712K/131072K available (7168K kernel code, 431K rwdata, 2600K rodata, 1024K init, 171K bss, 25976K reserved, 16384K cma-reserved)
[    0.000000] rcu: Preemptible hierarchical RCU implementation.
[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=4 to nr_cpu_ids=2.
[    0.000000]  Tasks RCU enabled.
[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.
[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16
[    0.000000] random: get_random_bytes called from start_kernel+0x24c/0x3cc with crng_init=0
[    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (phys).
[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns
[    0.000006] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns
[    0.000018] Switching to timer-based delay loop, resolution 41ns
[    0.000204] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns
[    0.001081] Console: colour dummy device 80x30
[    0.001122] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj=240000)
[    0.001136] pid_max: default: 32768 minimum: 301
[    0.001322] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)
[    0.001337] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)
[    0.001974] CPU: Testing write buffer coherency: ok
[    0.002299] /cpus/cpu@0 missing clock-frequency property
[    0.002322] /cpus/cpu@1 missing clock-frequency property
[    0.002334] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.002948] Setting up static identity map for 0x40100000 - 0x40100060
[    0.003076] rcu: Hierarchical SRCU implementation.
[    0.003409] BOOTEVENT:         3.400540: ON

[    0.003615] smp: Bringing up secondary CPUs ...
[    0.004990] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.005148] smp: Brought up 1 node, 2 CPUs
[    0.005164] SMP: Total of 2 processors activated (96.00 BogoMIPS).
[    0.005171] CPU: All CPU(s) started in SVC mode.


[    0.005676] devtmpfs: initialized
[    0.018327] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5
[    0.018937] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.018966] futex hash table entries: 512 (order: 3, 32768 bytes, linear)
[    0.019783] pinctrl core: initialized pinctrl subsystem
[    0.021164] NET: Registered protocol family 16
[    0.022998] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.058412] rtc_ccu: sunxi ccu init OK
[    0.060937] ccu: sunxi ccu init OK
[    0.061407] r_ccu: sunxi ccu init OK
[    0.106543] iommu: Default domain type: Translated
[    0.106777] sunxi iommu: irq = 24


[    0.107963] SCSI subsystem initialized
[    0.108383] usbcore: registered new interface driver usbfs
[    0.108474] usbcore: registered new interface driver hub
[    0.108602] usbcore: registered new device driver usb


[    0.108793] mc: Linux media interface: v0.10
[    0.108865] videodev: Linux video capture interface: v2.00
[    0.110829] Advanced Linux Sound Architecture Driver Initialized.
[    0.111535] Bluetooth: Core ver 2.22
[    0.111624] NET: Registered protocol family 31
[    0.111634] Bluetooth: HCI device and connection manager initialized
[    0.111654] Bluetooth: HCI socket layer initialized
[    0.111667] Bluetooth: L2CAP socket layer initialized
[    0.111695] Bluetooth: SCO socket layer initialized

[    0.112070] pwm module init!
[    0.113620] g2d 5410000.g2d: Adding to iommu group 0
[    0.114034] G2D: rcq version initialized.major:251
[    0.114715] input: sunxi-keyboard as /devices/virtual/input/input0
[    0.116181] clocksource: Switched to clocksource arch_sys_counter


[    0.125835] sun8iw20-pinctrl pio: initialized sunXi PIO driver
[    0.141063] thermal_sys: Registered thermal governor 'step_wise'
[    0.141072] thermal_sys: Registered thermal governor 'user_space'

[    0.141653] NET: Registered protocol family 2
[    0.142442] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 6144 bytes, linear)
[    0.142473] TCP established hash table entries: 1024 (order: 0, 4096 bytes, linear)
[    0.142498] TCP bind hash table entries: 1024 (order: 1, 8192 bytes, linear)
[    0.142522] TCP: Hash tables configured (established 1024 bind 1024)
[    0.142625] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)
[    0.142660] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)
[    0.142863] NET: Registered protocol family 1
[    0.145332] Initialise system trusted keyrings
[    0.145540] workingset: timestamp_bits=30 max_order=15 bucket_order=0
[    0.146294] fuse: init (API version 7.31)
[    0.176630] NET: Registered protocol family 38


[    0.176654] Key type asymmetric registered
[    0.176664] Asymmetric key parser 'x509' registered
[    0.176753] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 249)
[    0.176766] io scheduler mq-deadline registered
[    0.176775] io scheduler kyber registered
[    0.176919] atomic64_test: passed

// 屏幕显示驱动部分
[    0.178121] [DISP]disp_module_init
[    0.178691] disp 5000000.disp: Adding to iommu group 0
[    0.179328] [DISP] disp_init,line:2386:
[    0.179334] smooth display screen:0 type:1 mode:4
[    0.196148] display_fb_request,fb_id:0
[    0.206067] disp_al_manager_apply ouput_type:1
[    0.206300] [DISP] lcd_clk_config,line:735:
[    0.206312] disp 0, clk: pll(408000000),clk(408000000),dclk(68000000) dsi_rate(68000000)
[    0.206312]      clk real:pll(408000000),clk(408000000),dclk(102000000) dsi_rate(150000000)
[    0.206430] sunxi_pwm_enable_dual: can't parse pwm device
[    0.206908] [DISP]disp_module_init finish

// 串口初始化
[    0.208018] sunxi_sid_init()551 - insmod ok
[    0.208461] pwm-regulator: supplied by regulator-dummy
[    0.210615] uart uart0: get regulator failed
[    0.210645] uart uart0: uart0 supply uart not found, using dummy regulator
[    0.210974] uart0: ttyS0 at MMIO 0x2500000 (irq = 34, base_baud = 1500000) is a SUNXI
[    0.211004] sw_console_setup()1784 - console setup baud 115200 parity n bits 8, flow n
[    0.239310] Freeing logo buffer memory: 4000K
[    1.088104] printk: console [ttyS0] enabled

[    1.093696] sun8iw20-pinctrl pio: pio supply vcc-pg not found, using dummy regulator
[    1.102991] uart uart1: get regulator failed
[    1.107834] uart uart1: uart1 supply uart not found, using dummy regulator
[    1.115903] uart1: ttyS1 at MMIO 0x2500400 (irq = 35, base_baud = 1500000) is a SUNXI
[    1.125467] sun8iw20-pinctrl pio: pio supply vcc-pb not found, using dummy regulator
[    1.134689] uart uart4: get regulator failed
[    1.139526] uart uart4: uart4 supply uart not found, using dummy regulator
[    1.147634] uart4: ttyS4 at MMIO 0x2501000 (irq = 36, base_baud = 1500000) is a SUNXI
[    1.157323] uart uart5: get regulator failed
[    1.162134] uart uart5: uart5 supply uart not found, using dummy regulator
[    1.170252] uart5: ttyS5 at MMIO 0x2501400 (irq = 37, base_baud = 1500000) is a SUNXI
[    1.180349] misc dump reg init
[    1.187226] libphy: Fixed MDIO Bus: probed


[    1.191832] CAN device driver interface
[    1.197232] sun8iw20-pinctrl pio: pio supply vcc-pe not found, using dummy regulator

// 以太网初始化
[    1.206142] sunxi gmac driver's version: 1.0.0
[    1.211351] gmac-power0: NULL
[    1.214702] gmac-power1: NULL
[    1.218045] gmac-power2: NULL
[    1.222543] Failed to alloc md5
[    1.226079] eth0: Use random mac address


[    1.230856] PPP generic driver version 2.4.2
[    1.235928] PPP BSD Compression module registered
[    1.241250] PPP Deflate Compression module registered
[    1.246974] PPP MPPE Compression module registered
[    1.252352] NET: Registered protocol family 24

// USB 初始化
[    1.257385] ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
[    1.264719] sunxi-ehci: EHCI SUNXI driver
[    1.269695] get ehci0-controller wakeup-source is fail.
[    1.275689] sunxi ehci0-controller don't init wakeup source
[    1.281994] [sunxi-ehci0]: probe, pdev->name: 4101000.ehci0-controller, sunxi_ehci: 0xc0c8cc48, 0x:c8836000, irq_no:39
[    1.294023] [sunxi-ehci0]: Not init ehci0
[    1.298878] get ehci1-controller wakeup-source is fail.
[    1.304860] sunxi ehci1-controller don't init wakeup source
[    1.311139] [sunxi-ehci1]: probe, pdev->name: 4200000.ehci1-controller, sunxi_ehci: 0xc0c8d168, 0x:c883a000, irq_no:3b
[    1.323446] sunxi-ehci 4200000.ehci1-controller: 4200000.ehci1-controller supply hci not found, using dummy regulator
[    1.335825] sunxi-ehci 4200000.ehci1-controller: EHCI Host Controller
[    1.343111] sunxi-ehci 4200000.ehci1-controller: new USB bus registered, assigned bus number 1
[    1.353151] sunxi-ehci 4200000.ehci1-controller: irq 59, io mem 0x04200000
[    1.386199] sunxi-ehci 4200000.ehci1-controller: USB 2.0 started, EHCI 1.00
[    1.394019] sunxi-ehci 4200000.ehci1-controller: ehci_irq: highspeed device connect
[    1.403593] hub 1-0:1.0: USB hub found
[    1.407883] hub 1-0:1.0: 1 port detected
[    1.413110] ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
[    1.420101] sunxi-ohci: OHCI SUNXI driver
[    1.425078] get ohci0-controller wakeup-source is fail.
[    1.431119] sunxi ohci0-controller don't init wakeup source
[    1.437393] [sunxi-ohci0]: probe, pdev->name: 4101400.ohci0-controller, sunxi_ohci: 0xc0c8ced8
[    1.447082] [sunxi-ohci0]: Not init ohci0
[    1.451898] get ohci1-controller wakeup-source is fail.
[    1.457906] sunxi ohci1-controller don't init wakeup source
[    1.464188] [sunxi-ohci1]: probe, pdev->name: 4200400.ohci1-controller, sunxi_ohci: 0xc0c8d3f8
[    1.474118] sunxi-ohci 4200400.ohci1-controller: 4200400.ohci1-controller supply hci not found, using dummy regulator
[    1.486551] sunxi-ohci 4200400.ohci1-controller: OHCI Host Controller
[    1.493810] sunxi-ohci 4200400.ohci1-controller: new USB bus registered, assigned bus number 2
[    1.503778] sunxi-ohci 4200400.ohci1-controller: irq 60, io mem 0x04200400
[    1.581129] hub 2-0:1.0: USB hub found
[    1.585383] hub 2-0:1.0: 1 port detected

// 常用usb类型驱动设备
[    1.590659] usbcore: registered new interface driver cdc_wdm
[    1.597328] usbcore: registered new interface driver uas
[    1.603407] usbcore: registered new interface driver usb-storage
[    1.610245] usbcore: registered new interface driver ums-alauda
[    1.616994] usbcore: registered new interface driver ums-cypress
[    1.623803] usbcore: registered new interface driver ums-datafab
[    1.630804] usbcore: registered new interface driver ums_eneub6250
[    1.637834] usbcore: registered new interface driver ums-freecom
[    1.644657] usbcore: registered new interface driver ums-isd200
[    1.651387] usbcore: registered new interface driver ums-jumpshot
[    1.658305] usbcore: registered new interface driver ums-karma
[    1.664936] usbcore: registered new interface driver ums-onetouch
[    1.671877] usbcore: registered new interface driver ums-realtek
[    1.678724] usbcore: registered new interface driver ums-sddr09
[    1.685428] usbcore: registered new interface driver ums-sddr55
[    1.692150] usbcore: registered new interface driver ums-usbat

// CH341 USB 转串口
[    1.699155] usbcore: registered new interface driver ch341
[    1.705363] usbserial: USB Serial support registered for ch341-uart
[    1.712667] usbcore: registered new interface driver cp210x
[    1.718997] usbserial: USB Serial support registered for cp210x
[    1.725734] usbcore: registered new interface driver option
[    1.732074] usbserial: USB Serial support registered for GSM modem (1-port)
[    1.740083] usbcore: registered new interface driver pl2303
[    1.746424] usbserial: USB Serial support registered for pl2303

// USB 输入设备
[    1.755704] ts probe start
[    1.756138] input: 2009c00.rtp as /devices/platform/soc@3000000/2009c00.rtp/input/input1
[    1.768596] ts probe success
[    1.769050] sunxi_gpadc_init,2137, success
[    1.776983] usb 1-1: new high-speed USB device number 2 using sunxi-ehci
[    1.784954] sunxi_gpadc_setup: get channel scan data failed
[    1.791623] input: sunxi-gpadc0 as /devices/virtual/input/input2
[    1.799096] i2c /dev entries driver
[    1.803240] IR NEC protocol handler initialized
[    1.808358] IR RC5(x/sz) protocol handler initialized

// USB 摄像头
[    1.815236] usbcore: registered new interface driver uvcvideo
[    1.821709] USB Video Class driver (1.1.1)

[    1.826314] gspca_main: v2.14.0 registered

// 编解码引擎
[    1.830929] sunxi cedar version 1.1
[    1.835048] sunxi-cedar 1c0e000.ve: Adding to iommu group 0
[    1.841345] VE: sunxi_cedar_probe power-domain init!!!
[    1.847140] VE: install start!!!
[    1.847140]
[    1.852713] VE: cedar-ve the get irq is 43
[    1.852713]
[    1.859231] VE: ve_debug_proc_info:(ptrval), data:(ptrval), lock:(ptrval)
[    1.859231]
[    1.868694] VE: install end!!!
[    1.868694]
[    1.873778] VE: sunxi_cedar_probe


[    1.877824] Driver for 1-wire Dallas network protocol.

// 看门狗
[    1.884814] sunxi-wdt 20500a0.watchdog: Watchdog enabled (timeout=16 sec, nowayout=0)
[    1.894227] flysun50i_cpufreq_init===========
[    1.900924] sun8iw20-pinctrl pio: pio supply vcc-pc not found, using dummy regulator
[    1.909912] sunxi-mmc 4022000.sdmmc: SD/MMC/SDIO Host Controller Driver(v4.21 2021-05-24 16:10)
[    1.919900] sunxi-mmc 4022000.sdmmc: ***ctl-spec-caps*** 308
[    1.926363] sunxi-mmc 4022000.sdmmc: No vmmc regulator found
[    1.932712] sunxi-mmc 4022000.sdmmc: No vqmmc regulator found
[    1.939249] sunxi-mmc 4022000.sdmmc: No vdmmc regulator found
[    1.945775] sunxi-mmc 4022000.sdmmc: No vd33sw regulator found
[    1.952360] sunxi-mmc 4022000.sdmmc: No vd18sw regulator found
[    1.958954] sunxi-mmc 4022000.sdmmc: No vq33sw regulator found
[    1.965519] sunxi-mmc 4022000.sdmmc: No vq18sw regulator found
[    1.972112] sunxi-mmc 4022000.sdmmc: Cann't get pin bias hs pinstate,check if needed
[    1.981689] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 0Hz bm PP pm UP vdd 21 width 1 timing LEGACY(SDR12) dt B
[    1.995681] hub 1-1:1.0: USB hub found
[    2.000334] hub 1-1:1.0: 4 ports detected
[    2.005526] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm PP pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.029826] sunxi-mmc 4022000.sdmmc: detmode:alway in(non removable)
[    2.037013] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm PP pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.049435] hidraw: raw HID events driver (C) Jiri Kosina
[    2.055740] usbcore: registered new interface driver usbhid
[    2.056803] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm PP pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.062047] usbhid: USB HID core driver
[    2.075003] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm OD pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B

// GPIO 控制驱动
[    2.079325] rp_power prepare build 3 gpio
[    2.094208] rp_power request vcc5v_usb12
[    2.098674] success request gpio160 out
[    2.103002] rp_power request vdd_3G
[    2.106971] success request gpio200 out
[    2.111314] rp_power request run_led
[    2.115334] success request gpio161 flash
[    2.119873] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm OD pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.119963] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm OD pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.131902] input: gpio_event as /devices/platform/rp_power/input/input3
[    2.151514] rp_gpio prepare build 2 gpio
[    2.152036] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm OD pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.155974] rp_gpio request pa_pe10
[    2.171625] success request gpio138 out
[    2.176028] rp_gpio request host_pe11
[    2.180212] success request gpio139 out


[    2.185370] usbcore: registered new interface driver snd-usb-audio
[    2.192375] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm PP pm ON vdd 21 width 1 timing LEGACY(SDR12) dt B
[    2.206064] [AUDIOCODEC][sunxi_codec_parse_params][2412]:digital_vol:0, lineout_vol:26, mic1gain:31, mic2gain:31 pa_msleep:120, pa_level:1, pa_pwr_level:1
[    2.206064]
[    2.223331] [AUDIOCODEC][sunxi_codec_parse_params][2448]:adcdrc_cfg:2, adchpf_cfg:1, dacdrc_cfg:2, dachpf:0
[    2.234330] [AUDIOCODEC][sunxi_codec_parse_params][2463]:gpio-spk set failed, SPK not work!
[    2.243737] sunxi-mmc 4022000.sdmmc: avoid to switch power_off_notification to POWERED_ON(0x01)
[    2.244228] [AUDIOCODEC][sunxi_internal_codec_probe][2609]:codec probe finished
[    2.253566] sunxi-mmc 4022000.sdmmc: avoid to switch power_off_notification to POWERED_ON(0x01)
[    2.262927] debugfs: Directory '203034c.dummy_cpudai' with parent 'audiocodec' already present!
[    2.271910] sunxi-mmc 4022000.sdmmc: avoid to switch power_off_notification to POWERED_ON(0x01)
[    2.281501] [SNDCODEC][sunxi_card_init][583]:card init finished
[    2.291176] sunxi-mmc 4022000.sdmmc: avoid to switch power_off_notification to POWERED_ON(0x01)
[    2.297878] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 400000Hz bm PP pm ON vdd 21 width 1 timing MMC-HS(SDR20) dt B
[    2.319782] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 50000000Hz bm PP pm ON vdd 21 width 1 timing MMC-HS(SDR20) dt B
[    2.319808] sunxi-codec-machine 2030340.sound: 2030000.codec <-> 203034c.dummy_cpudai mapping ok
[    2.341604] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 50000000Hz bm PP pm ON vdd 21 width 4 timing MMC-HS(SDR20) dt B
[    2.343332] input: audiocodec sunxi Audio Jack as /devices/platform/soc@3000000/2030340.sound/sound/card0/input4
[    2.365029] sunxi-mmc 4022000.sdmmc: sdc set ios:clk 50000000Hz bm PP pm ON vdd 21 width 4 timing MMC-DDR52 dt B
[    2.366300] NET: Registered protocol family 10
[    2.381735] mmc0: new DDR MMC card at address 0001
[    2.382769] Segment Routing with IPv6
[    2.388422] mmcblk0: mmc0:0001 8GTF4R 7.28 GiB
[    2.391496] sit: IPv6, IPv4 and MPLS over IPv4 tunneling driver
[    2.396996] mmcblk0rpmb: mmc0:0001 8GTF4R partition 3 512 KiB, chardev (244:0)
[    2.404522] NET: Registered protocol family 17
[    2.416330] usb 1-1.4: new high-speed USB device number 3 using sunxi-ehci
[    2.424381] NET: Registered protocol family 15
[    2.429612] can: controller area network core (rev 20170425 abi 9)
[    2.436788] NET: Registered protocol family 29
[    2.441839]  mmcblk0: p1 p2 p3 p4 p5 p6 p7 p8
[    2.446231] can: raw protocol (rev 20170425)
[    2.451511] can: broadcast manager protocol (rev 20170425 t)
[    2.458011] can: netlink gateway (rev 20190810) max_hops=1
[    2.464485] Bluetooth: RFCOMM TTY layer initialized
[    2.470059] Bluetooth: RFCOMM socket layer initialized
[    2.475852] Bluetooth: RFCOMM ver 1.11
[    2.480101] lib80211: common routines for IEEE802.11 drivers
[    2.486467] lib80211_crypt: registered algorithm 'NULL'
[    2.492336] lib80211_crypt: registered algorithm 'WEP'
[    2.498117] lib80211_crypt: registered algorithm 'CCMP'
[    2.503977] lib80211_crypt: registered algorithm 'TKIP'
[    2.510564] Registering SWP/SWPB emulation handler
[    2.516361] Loading compiled-in X.509 certificates
[    2.522361] tv_probe()1527 - of_property_read_string tv_power failed!
[    2.530615] get_key_map_info()168 - Failed to find "tvou" in dts.
[    2.537752] tv probe finished!
[    2.560336] sun8iw20-pinctrl pio: missing pins property in node twi3
[    2.567581] sunxi-i2c: probe of 2502c00.twi failed with error -22
[    2.576593] fly=====sun8iw20_nvmem_xlate:ver_data.nv_speed=0x93406000
[    2.583830] fly:ver_data.version=2,ver_data.name=b0
[    2.595459] sunxi_pwm_enable_dual: can't parse pwm device
[    2.601649] sunxi_pwm_enable_dual: can't parse pwm device
[    2.607747] cpu cpu0: _set_opp_voltage: failed to set voltage (950000 950000 950000 mV): -19
[    2.617291] sunxi_pwm_enable_dual: can't parse pwm device
[    2.623394] sunxi_pwm_enable_dual: can't parse pwm device
[    2.629467] cpu cpu0: _set_opp_voltage: failed to set voltage (950000 950000 950000 mV): -19
[    2.638950] cpufreq: __target_index: Failed to change cpu frequency: -19
[    2.647927] sunxi_pwm_enable_dual: can't parse pwm device
[    2.653301] cfg80211: Loading compiled-in X.509 certificates for regulatory database
[    2.654064] sunxi_pwm_enable_dual: can't parse pwm device
[    2.666391] cfg80211: Loaded X.509 cert 'sforshee: 00b28ddf47aef9cea7'
[    2.669252] cpu cpu0: _set_opp_voltage: failed to set voltage (950000 950000 950000 mV): -19
[    2.676470] platform regulatory.0: Direct firmware load for regulatory.db failed with error -2
[    2.685719] sunxi_pwm_enable_dual: can't parse pwm device
[    2.695395] clk: Not disabling unused clocks
[    2.701396] sunxi_pwm_enable_dual: can't parse pwm device
[    2.706154] ALSA device list:
[    2.712196] cpu cpu0: _set_opp_voltage: failed to set voltage (950000 950000 950000 mV): -19
[    2.715494]   #0: audiocodec
[    2.724997] cpufreq: __target_index: Failed to change cpu frequency: -19
[    2.735836] cfg80211: failed to load regulatory.db
[    2.736253] alloc_fd: slot 0 not NULL!
[    2.747857] random: fast init done

// 加载文件系统
[    2.751768] EXT4-fs (mmcblk0p5): INFO: recovery required on readonly filesystem
[    2.760006] EXT4-fs (mmcblk0p5): write access will be enabled during recovery
[    2.796797] EXT4-fs (mmcblk0p5): recovery complete
[    2.804302] EXT4-fs (mmcblk0p5): mounted filesystem with ordered data mode. Opts: (null)
[    2.813502] VFS: Mounted root (ext4 filesystem) readonly on device 179:5.
[    2.823187] Freeing unused kernel memory: 1024K
[    2.846350] Kernel init done
// 内核初始化完成

// Init进程开始
[    2.849583] Run /init as init process
can't run '/etc/preinit': No such file or directory
[    2.935668] EXT4-fs (mmcblk0p5): re-mounted. Opts: (null)
Starting syslogd: OK
Starting klogd: OK
[    3.100205] EXT4-fs (mmcblk0p8): recovery complete
[    3.106759] EXT4-fs (mmcblk0p8): mounted filesystem with ordered data mode. Opts: (null)
mount: mounting /dev/mmcblk0p8 on /userdata failed: Invalid argument
Populating /dev using udev: [    3.165878] udevd[1021]: starting version 3.2.7
[    3.180674] random: udevd: uninitialized urandom read (16 bytes read)
[    3.189328] random: udevd: uninitialized urandom read (16 bytes read)
[    3.196728] random: udevd: uninitialized urandom read (16 bytes read)
[    3.209747] udevd[1021]: specified group 'input' unknown
[    3.216775] udevd[1021]: specified group 'kvm' unknown
[    3.242322] udevd[1022]: starting eudev-3.2.7

//蓝牙 USB 驱动
[    3.706271] usb 1-1.1: new high-speed USB device number 4 using sunxi-ehci
[    3.914672] rtk_btusb: Realtek Bluetooth USB driver ver 3.1.5a87250.20230526-133748
[    3.923359] rtk_btcoex: rtk_btcoex_init: version: 1.2
[    3.929198] rtk_btcoex: create workqueue
[    3.933970] rtk_btcoex: alloc buffers 1408, 2240 for ev and l2
[    3.940716] rtk_btusb: btusb_probe intf->cur_altsetting->desc.bInterfaceNumber 0
[    3.949120] rtk_btusb: btusb_probe can_wakeup 1, may wakeup 0
[    3.955806] rtk_btusb: patch_add
[    3.959487] rtk_btusb: auto suspend is disabled
[    3.964583] rtk_btusb: pid = 0xd723
[    3.968564] rtk_btusb: patch_add: Reset gEVersion to 0xff
[    3.976996] rtk_btusb: btusb_probe: done
[    3.983736] usbcore: registered new interface driver rtk_btusb
[    3.991736] rtk_btusb: btusb_open start
[    3.996056] rtk_btusb: btusb_open hdev->promisc ==0
[    4.001668] rtk_btusb: download_patch start

// WIFI 模组
[    4.006134] RTW: module init start
[    4.006901] rtk_btusb: chip type value: 0x71
[    4.010264] RTW: rtl8723du v5.10.0-24-g3dddfb3.20200429_COEX20190530-3030

//-------------------------------------------------------------------

[    5.389148] usbcore: registered new interface driver rtl8723du
[    5.395704] RTW: module init ret=0
done

//
Initializing random number generator... [    5.472538] urandom_read: 2 callbacks suppressed
[    5.472549] random: dd: uninitialized urandom read (512 bytes read)
done.
[    5.506277] usb 1-1.1: new high-speed USB device number 5 using sunxi-ehci
Starting system message bus: [    5.538733] random: dbus-uuidgen: uninitialized urandom read (12 bytes read)
[    5.546836] random: dbus-uuidgen: uninitialized urandom read (8 bytes read)
done

// 4G
Starting network: [    5.656968] usb 1-1.1: config 1 has an invalid interface number: 6 but max is 5
[    5.665307] usb 1-1.1: config 1 has no interface number 5
[    5.676582] option 1-1.1:1.2: GSM modem (1-port) converter detected
[    5.684306] usb 1-1.1: GSM modem (1-port) converter now attached to ttyUSB0
[    5.694102] option 1-1.1:1.3: GSM modem (1-port) converter detected
[    5.701999] usb 1-1.1: GSM modem (1-port) converter now attached to ttyUSB1
[    5.711768] option 1-1.1:1.4: GSM modem (1-port) converter detected
[    5.719509] usb 1-1.1: GSM modem (1-port) converter now attached to ttyUSB2
[    5.729282] option 1-1.1:1.6: GSM modem (1-port) converter detected
[    5.737070] usb 1-1.1: GSM modem (1-port) converter now attached to ttyUSB3
OK


Starting dhcpcd...
dev: loaded udev
script_runreason: /lib/dhcpcd/dhcpcd-run-hooks: No such file or directory
script_runreason: /lib/dhcpcd/dhcpcd-run-hooks: No such file or directory
script_runreason: /lib/dhcpcd/dhcpcd-run-hooks: No such file or directory
script_runreason: /lib/dhcpcd/dhcpcd-run-hooks: No such file or directory
no interfaces have a carrier

// 
forked to background, child pid 1121
[    5.994993] libphy: 4500000.eth: probed
[    6.000700] sunxi-gmac 4500000.eth eth0: eth0: Type(7) PHY ID 937c4024 at 0 IRQ poll (4500000.eth-0:00)
[    6.026737] RTW: rtw_ndev_notifier_call(wlan0) state:14
[    6.032626] RTW: _netdev_open(wlan0) , bup=0
[    6.037944] RTW:  power-on :REG_SYS_CLKR 0x09=0x30. REG_CR 0x100=0xea.
[    6.045274] RTW:  MAC has not been powered on yet.
[    6.058316] RTW: SetHwReg: bMacPwrCtrlOn=1
[    6.063061] RTW: _InitPowerOn_8723du: Normal Mode
[    6.068579] RTW: _InitPowerOn_8723du: SPS Mode
[    6.076401] RTW: rtl8723d_FirmwareDownload(wlan0) tmp_ps=0
[    6.082693] RTW: rtl8723d_FirmwareDownload fw: FW_NIC, size: 28884
[    6.089693] RTW: rtl8723d_FirmwareDownload: fw_ver=30 fw_subver=0000 sig=0x23d1, Month=02, Date=18, Hour=11, Minute=05
[    6.101720] RTW: rtl8723d_FirmwareDownload(): Shift for fw header!
[    6.108840] RTW: rtl8723d_FirmwareDownload by IO write!
[    6.147320] RTW: polling_fwdl_chksum: Checksum report OK! (1, 0ms), REG_MCUFWDL:0x00070305
[    6.156621] RTW: rtl8723d_FirmwareDownload: download FW count:1
[    6.164808] RTW: _8051Reset8723: Finish
[    6.183070] RTW: _FWFreeToGo: Polling FW ready OK! (111, 20ms), REG_MCUFWDL:0x000703c6
[    6.191992] RTW: rtl8723d_FirmwareDownload success. write_fw:1, 80ms
[    6.199451] RTW:  <=== rtl8723d_FirmwareDownload()
[    6.204842] RTW: Set RF Chip ID to RF_6052 and RF type to 0.
[    6.211239]
[    6.211239] insmod_device_driver
[    6.211239]
[    6.218214] RTW: HalDetectPwrDownMode(): PDN=0
[    6.223613] sunxi_usb_udc 4100000.udc-controller: 4100000.udc-controller supply udc not found, using dummy regulator
[    6.436701] RTW: txpath=0x1, rxpath=0x1
[    6.441012] RTW: txpath_1ss:0x1, num:1
[    6.567442] RTW: rtl8723du_hal_init in 530ms
[    6.572253] RTW: rtw_hal_set_macaddr_port wlan0- hw port(0) mac_addr =78:8a:86:dc:bc:63
[    6.582442] RTW: [HW_VAR_ENABLE_RX_BAR] 0x6A2=0x500
[    6.597951] RTW: rtw_hal_set_macaddr_port wlan0- hw port(0) mac_addr =78:8a:86:dc:bc:63
[    6.608061] RTW: #### hw_var_set_opmode() -4453 hw_port(0) mode = 2 ####
[    6.616330] RTW: MAC Address = 78:8a:86:dc:bc:63
[    6.621512] RTW: rtw_start_drv_threads(wlan0) enter
[    6.627028] RTW: rtw_start_drv_threads(wlan0) start RTW_CMD_THREAD
[    6.634199] RTW: rtw_cfg80211_init_wiphy:rf_type=0
[    6.639625] RTW: [HT] HAL Support STBC = 0x01
[    6.644523] RTW: -871x_drv - drv_open, bup=1
[    6.649548] RTW: cfg80211_rtw_set_power_mgmt(wlan0) enabled:1, timeout:-1
[    6.657207] RTW: rtw_ndev_notifier_call(wlan0) state:1
[    6.895148] rtk_btusb: btusb_flush add delay
[    6.910107] rtk_btusb: btusb_close
[    6.932828] rtk_btcoex: Close BTCOEX
[    6.936876] rtk_btcoex: -x
[    7.872335] rtk_btusb: btusb_open start
[    7.876680] rtk_btusb: btusb_open hdev->promisc ==0
[    7.882150] rtk_btusb: download_patch start
[    7.886875] rtk_btusb: chip type value: 0x71
[    7.893067] rtk_btusb: chip_type->status = 0x0, chip_type->chip = 0xbeef
[    7.900635] rtk_btusb: HCI reset.
[    7.914059] rtk_btusb: read_ver_rsp->lmp_subver = 0x6f71
[    7.920047] rtk_btusb: read_ver_rsp->hci_rev = 0x92b7
[    7.925711] rtk_btusb: patch_entry->lmp_sub = 0x8723
[    7.931309] rtk_btusb: Firmware already exists
[    7.936312] rtk_btusb: Rtk patch end 1
[    7.940516] rtk_btusb: chip type value: 0x71
[    7.945303] rtk_btusb: btusb_open set HCI UP RUNNING
[    7.950981] rtk_btcoex: Open BTCOEX
[    7.954900] rtk_btusb: btusb_open end
[    7.966219] rtk_btcoex: rtk_vendor_cmd_to_fw: opcode 0xfc1b
[    7.970088] rtk_btcoex: BTCOEX hci_rev 0x92b7
[    7.977567] rtk_btcoex: BTCOEX lmp_subver 0x6f71


Starting dropbear sshd: OK
Initializing postgresql data base...
su: unknown user postgres
done
Starting postgresql: su: unknown user postgres
OK


Starting telnetd: OK
Starting DHCP server: killall: pppd: no process killed
FAIL

// adb 调试进程启动
Starting adb [    8.518333] file system registered


sh: [: too many arguments
/etc/qtenv.sh: line 17: [: too many arguments
Error:Input device gt9xxnew_ts can not be found,plz check it!
Error:Input device gt9xxnew_ts can not be found,plz check it!

// qt5
find qt5 installed done
find qt5 installed done

killall: pppd: no process killed
[   10.646197]
[   10.646197] rmmod_device_driver
[   10.646197]
[   10.653052] rmmod_device_driver()223 WARN: get power supply failed
[   10.660415]
[   10.660415] insmod_device_driver
[   10.660415]
device_chose finished!
[   12.326236] random: crng init done
[   12.330068] random: 2 urandom warning(s) missed due to ratelimiting
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
xkbcommon: ERROR: failed to add default include path /usr/share/X11/xkb
Failed to create xkb context
killall: pppd: no process killed

```

## 开机初始化脚本 rcS

platform/framework/auto/rootfs/etc/init.d/rcS

```txt

-rwxr-xr-x    1 root     root          1054 Oct 20  2023 S01syslogd           // syslogd负责记录系统中kenel或应用程序产生的各种log信息的工具
-rwxr-xr-x    1 root     root          1046 Oct 20  2023 S02klogd             // 内核日志
-rwxrwxr-x    1 root     root           412 Oct 20  2023 S05mount_userdata
-rwxr-xr-x    1 root     root          1594 Oct 20  2023 S10udev
-rwxr-xr-x    1 root     root          1272 Oct 20  2023 S20urandom
-rwxr-xr-x    1 root     root          1635 Oct 20  2023 S30dbus
-rwxr-xr-x    1 root     root           438 Oct 20  2023 S40network
-rwxr-xr-x    1 root     root           617 Oct  8  2023 S41dhcpcd
-rwxrwxr-x    1 root     root           235 Oct 20  2023 S50bluetooth
-rwxr-xr-x    1 root     root          1354 Oct  8  2023 S50dropbear
-rwxr-xr-x    1 root     root           642 Oct 20  2023 S50postgresql
-rwxr-xr-x    1 root     root           614 Oct  8  2023 S50telnet
-rwxrwxr-x    1 root     root           154 Oct 20  2023 S52_4G-Daemon.sh
-rwxr-xr-x    1 root     root          1190 Oct  8  2023 S80dhcp-relay
-rwxr-xr-x    1 root     root          1156 Oct  8  2023 S80dhcp-server
-rwxr-xr-x    1 root     root           427 Oct 20  2023 S80dnsmasq
-rwxrwxr-x    1 root     root            56 Oct 20  2023 S90alsa.sh
-rwxr-xr-x    1 root     root           423 Oct 20  2023 rcK
-rwxr-xr-x    1 root     root           889 Oct 20  2023 rcS


```

检测大写S开头的所有脚本并执行它们

```sh

#!/bin/sh

# Start all init scripts in /etc/init.d
# executing them in numerical order.
#
for i in /etc/init.d/S??* ;do

     # Ignore dangling symlinks (if any).
     [ ! -f "$i" ] && continue

     case "$i" in
	*.sh)
	    # Source shell script for speed.
	    (
		trap - INT QUIT TSTP
		set start
		. $i
	    )
	    ;;
	*)
	    # No sh extension, so fork subprocess.
	    $i start
	    ;;
    esac
done

echo /sbin/mdev > /proc/sys/kernel/hotplug
mdev -s

/etc/adb_conf.sh start &

tinymix set "ADC3 Input MIC3 Boost Switch" 1 > /dev/null
tinymix set "HpSpeaker Switch" 1 > /dev/null
tinymix set "Headphone Switch" 1 > /dev/null

if [ ! -f "/usr/lib/libcrypto.so.1.0.0" ]; then
    ln -s /usr/lib/libcrypto.so.1.1 /usr/lib/libcrypto.so.1.0.0
fi

if [ ! -f "/usr/lib/libssl.so.1.0.0" ]; then
    ln -s /usr/lib/libssl.so.1.1 /usr/lib/libssl.so.1.0.0
fi
. /etc/qtenv.sh && DeviceTest &   // 此处更换默认应用

```

## 关机脚本-rcK

关机时还需要启动一遍启动脚本，只不过传入的参数是stop，需要处理一些后续工作才关机

```

sh-4.4# cat ./etc/init.d/rcK
#!/bin/sh


# Stop all init scripts in /etc/init.d
# executing them in reversed numerical order.
#
for i in $(ls -r /etc/init.d/S??*) ;do

     # Ignore dangling symlinks (if any).
     [ ! -f "$i" ] && continue

     case "$i" in
	*.sh)
	    # Source shell script for speed.
	    (
		trap - INT QUIT TSTP
		set stop
		. $i
	    )
	    ;;
	*)
	    # No sh extension, so fork subprocess.
	    $i stop
	    ;;
    esac
done


```

## BoardConfig.mk

./config/chips/t113/configs/evb1_auto/longan/BoardConfig.mk

```mk

LICHEE_KERN_DEFCONF:=sun8iw20p1smp_t113_auto_defconfig
LICHEE_KERN_DEFCONF_RECOVERY:=sun8iw20p1smp_t113_recovery_defconfig
LICHEE_BUILDING_SYSTEM:=buildroot
LICHEE_BR_VER:=201902
LICHEE_BR_DEFCONF:=sun8iw20p1_t113_defconfig                                       //buildroot的默认配置
LICHEE_COMPILER_TAR=gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi.tar.xz
LICHEE_BRANDY_DEFCONF:=sun8iw20p1_auto_defconfig
LICHEE_REDUNDANT_ENV_SIZE:=0x20000

```


./kernel/linux-5.4/arch/arm/configs/sun8iw20p1smp_t113_auto_defconfig

./buildroot/buildroot-201902/configs/sun8iw20p1_t113_defconfig

./brandy/brandy-2.0/u-boot-2018/configs/sun8iw20p1_auto_defconfig

## 编译后环境变量.buildconfig

```sh

t113_linux$ cat .buildconfig 
export LICHEE_PLATFORM=linux
export LICHEE_LINUX_DEV=longan
export LICHEE_KERN_VER=linux-5.4
export LICHEE_IC=t113
export LICHEE_BOARD=evb1_auto
export LICHEE_FLASH=default
export LICHEE_GNUEABI=gnueabi
export LICHEE_CHIP=sun8iw20p1
export LICHEE_ARCH=arm
export LICHEE_KERN_SYSTEM=
export LICHEE_KERN_DEFCONF=sun8iw20p1smp_t113_auto_defconfig
export LICHEE_KERN_DEFCONF_RECOVERY=sun8iw20p1smp_t113_recovery_defconfig
export LICHEE_KERN_DEFCONF_RELATIVE=sun8iw20p1smp_t113_auto_defconfig
export LICHEE_KERN_DEFCONF_ABSOLUTE=/home/lxg/code/t113_linux/kernel/linux-5.4/arch/arm/configs/sun8iw20p1smp_t113_auto_defconfig
export LICHEE_BUILDING_SYSTEM=buildroot
export LICHEE_BR_VER=201902
export LICHEE_BR_DEFCONF=sun8iw20p1_t113_defconfig
export LICHEE_BR_RAMFS_CONF=
export LICHEE_PRODUCT=
export LICHEE_BRANDY_VER=2.0
export LICHEE_BRANDY_DEFCONF=sun8iw20p1_auto_defconfig
export LICHEE_CROSS_COMPILER=arm-linux-gnueabi
export LICHEE_COMPILER_TAR=gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi.tar.xz
export LICHEE_ROOTFS=target-arm-linaro-5.3.tar.bz2
export LICHEE_BUSSINESS=
export LICHEE_TOP_DIR=/home/lxg/code/t113_linux
export LICHEE_BRANDY_DIR=/home/lxg/code/t113_linux/brandy/brandy-2.0
export LICHEE_BUILD_DIR=/home/lxg/code/t113_linux/build
export LICHEE_BR_DIR=/home/lxg/code/t113_linux/buildroot/buildroot-201902
export LICHEE_DEVICE_DIR=/home/lxg/code/t113_linux/device
export LICHEE_KERN_DIR=/home/lxg/code/t113_linux/kernel/linux-5.4
export LICHEE_PLATFORM_DIR=/home/lxg/code/t113_linux/platform
export LICHEE_SATA_DIR=/home/lxg/code/t113_linux/test/SATA
export LICHEE_DRAGONBAORD_DIR=/home/lxg/code/t113_linux/test/dragonboard
export LICHEE_TOOLS_DIR=/home/lxg/code/t113_linux/tools
export LICHEE_COMMON_CONFIG_DIR=/home/lxg/code/t113_linux/device/config/common
export LICHEE_CHIP_CONFIG_DIR=/home/lxg/code/t113_linux/device/config/chips/t113
export LICHEE_BOARD_CONFIG_DIR=/home/lxg/code/t113_linux/device/config/chips/t113/configs/evb1_auto
export LICHEE_PRODUCT_CONFIG_DIR=/home/lxg/code/t113_linux/device/target/
export LICHEE_OUT_DIR=/home/lxg/code/t113_linux/out
export LICHEE_BRANDY_OUT_DIR=/home/lxg/code/t113_linux/device/config/chips/t113/bin
export LICHEE_BR_OUT=/home/lxg/code/t113_linux/out/t113/evb1_auto/longan/buildroot
export LICHEE_PACK_OUT_DIR=/home/lxg/code/t113_linux/out/pack_out
export LICHEE_TOOLCHAIN_PATH=/home/lxg/code/t113_linux/out/gcc-linaro-5.3.1-2016.05-x86_64_arm-linux-gnueabi
export LICHEE_PLAT_OUT=/home/lxg/code/t113_linux/out/t113/evb1_auto/longan
export LICHEE_BOARDCONFIG_PATH="/home/lxg/code/t113_linux/device/config/chips/t113/configs/default/BoardConfig.mk /home/lxg/code/t113_linux/device/config/chips/t113/configs/evb1_auto/longan/BoardConfig.mk"
export LICHEE_REDUNDANT_ENV_SIZE=0x20000
export ANDROID_CLANG_PATH=
export LICHEE_COMPRESS=
export ANDROID_TOOLCHAIN_PATH=
export AW_QT_VER=5.12.5
export QT_INSTALL_DIR=/home/lxg/code/t113_linux/platform/framework/qt/qt-everywhere-src-5.12.5/Qt_5.12.5
export QT_RUN_DIR=/usr/local/Qt_5.12.5
export QT_TARGET_DIR=/home/lxg/code/t113_linux/out/t113/evb1_auto/longan/buildroot/target//usr/local/Qt_5.12.5

```

交叉编译目录：export LICHEE_CROSS_COMPILER=arm-linux-gnueabi

设备上QT环境目录：export QT_RUN_DIR=/usr/local/Qt_5.12.5














