---
layout:     post
title:      Linux 驱动 FAQ
subtitle:   日常问题记录
date:       2025-04-02
author:     LXG
header-img: img/post-bg-phone.jpg
catalog: true
tags:
    - linux
---

## A133 WIFI 无法打开问题

**报错日志**

```txt

[    5.778834] [  T193] sunxi-rfkill soc@2900000:rfkill: module version: v1.1.0
[    5.786803] [  T193] sunxi-rfkill soc@2900000:rfkill: pinctrl_lookup_state(default) failed! return ffffffffffffffed 
[    5.798631] [  T193] sunxi-rfkill soc@2900000:rfkill: get gpio chip_en failed
[    5.806645] [  T193] sunxi-rfkill soc@2900000:rfkill: power_en gpio=361 assert=1
[    5.814973] [  T193] sunxi-rfkill soc@2900000:rfkill: wlan_busnum (1)
[    5.822634] [  T193] sunxi-rfkill soc@2900000:rfkill: wlan power[0] (axp803-dldo1) voltage: 1800mV
[    5.832704] [  T193] sunxi-rfkill soc@2900000:rfkill: wlan_regon gpio=359 assert=1
[    5.841227] [  T193] sunxi-rfkill soc@2900000:rfkill: wlan_hostwake gpio=360 assert=1
[    5.850019] [  T193] sunxi-rfkill soc@2900000:rfkill: wakeup source is enabled
[    5.858251] [  T193] sunxi-rfkill soc@2900000:rfkill: bt power[0] (axp803-dldo1) voltage: 1800mV
[    5.873840] [  T193] sunxi-rfkill soc@2900000:rfkill: bt_rst gpio=354 assert=0
[    5.881922] [  T193] sun50iw10p1-r-pinctrl-aw 7022000.pinctrl: pin PL2 already requested by 7080000.uart; cannot claim for 7022000.pinctrl:354
[    5.896201] [  T193] sun50iw10p1-r-pinctrl-aw 7022000.pinctrl: pin-354 (7022000.pinctrl:354) status -22
[    5.906664] [  T193] sunxi-rfkill soc@2900000:rfkill: can't request bt_rst gpio 354

```

**问题原因**

PL2 引脚配置冲突

**修改方案**

```dts

	/* bt session */
	bt {
		compatible    = "allwinner,sunxi-bt";
		clocks;
		clock-names;
		bt_power      = "axp803-dldo1";
		bt_power_vol  = <1800000>;
		bt_rst_n      = <&r_pio PL 4 GPIO_ACTIVE_LOW>; // 修改PL2 为 PL4
	};

```
